# Oh My OpenCode

Oh My OpenCode is a batteries-included OpenCode plugin that transforms your AI coding assistant into a powerful multi-agent orchestration system. It provides specialized AI agents (Sisyphus, Oracle, Librarian, Explore), parallel background task execution, LSP/AST-grep refactoring tools, and full Claude Code compatibility. The plugin enables multi-model orchestration where different AI models handle different tasks based on their strengthsâ€”Claude Opus for complex reasoning, GPT for debugging, Gemini for frontend work.

The core philosophy centers on the "ultrawork" paradigm: include `ultrawork` or `ulw` in any prompt, and the system automatically explores your codebase, researches best practices, implements features following your conventions, and continues working until the task is complete. For precise work, Prometheus (Planner) mode creates detailed work plans through an interview process, then Atlas orchestrates execution with specialized sub-agents handling different aspects of the implementation.

---

## Installation

### Interactive Setup Wizard

Run the interactive installer to configure Oh My OpenCode with your AI providers.

```bash
# Using bunx (recommended)
bunx oh-my-opencode install

# Or using npx
npx oh-my-opencode install

# Non-interactive mode for CI/CD with provider flags
bunx oh-my-opencode install --no-tui --claude=max20 --openai=yes --gemini=yes --copilot=no
```

---

## CLI Commands

### Doctor - Environment Diagnostics

Run comprehensive health checks on your Oh My OpenCode installation.

```bash
# Run all diagnostics
bunx oh-my-opencode doctor

# Output in JSON format
bunx oh-my-opencode doctor --json

# Check specific category with verbose output
bunx oh-my-opencode doctor --category authentication --verbose
```

### Run - Session Execution

Execute OpenCode sessions with task completion enforcement.

```bash
# Run with a prompt
bunx oh-my-opencode run "Build a REST API with authentication"

# Keep session active until all TODOs complete
bunx oh-my-opencode run --enforce-completion "Refactor the payment module"

# Set maximum execution time
bunx oh-my-opencode run --timeout 3600 "Complete the migration"
```

### MCP OAuth Management

Manage OAuth authentication for remote MCP servers.

```bash
# Login to OAuth-protected MCP server
bunx oh-my-opencode mcp oauth login my-api --server-url https://api.example.com

# Login with explicit client ID and scopes
bunx oh-my-opencode mcp oauth login my-api --server-url https://api.example.com --client-id my-client --scopes "read,write"

# Check OAuth token status
bunx oh-my-opencode mcp oauth status my-api

# Remove stored tokens
bunx oh-my-opencode mcp oauth logout my-api
```

---

## Configuration

### Basic Configuration File

Create `~/.config/opencode/oh-my-opencode.jsonc` or `.opencode/oh-my-opencode.jsonc` for project-specific settings.

```jsonc
{
  "$schema": "https://raw.githubusercontent.com/code-yeongyu/oh-my-opencode/master/assets/oh-my-opencode.schema.json",

  // Override specific agent models
  "agents": {
    "oracle": { "model": "openai/gpt-5.2" },           // GPT for debugging
    "librarian": { "model": "zai-coding-plan/glm-4.7" }, // Cheap model for research
    "explore": { "model": "opencode/gpt-5-nano" },       // Free model for grep
    "multimodal-looker": { "model": "google/gemini-3-flash" }
  },

  // Override category models (used by task tool)
  "categories": {
    "quick": { "model": "anthropic/claude-haiku-4-5" },
    "visual-engineering": { "model": "google/gemini-3-pro" },
    "ultrabrain": { "model": "openai/gpt-5.3-codex", "variant": "xhigh" }
  },

  // Disable specific features
  "disabled_hooks": ["comment-checker", "auto-update-checker"],
  "disabled_agents": ["multimodal-looker"],
  "disabled_mcps": ["websearch"]
}
```

### Agent Configuration with Permissions

Configure individual agents with model overrides, temperature settings, and fine-grained permissions.

```jsonc
{
  "agents": {
    "oracle": {
      "model": "openai/gpt-5.2",
      "temperature": 0.3,
      "thinking": {
        "type": "enabled",
        "budgetTokens": 200000
      },
      "permission": {
        "edit": "deny",        // Read-only consultation
        "bash": "ask",         // Ask before running commands
        "webfetch": "allow"
      }
    },
    "explore": {
      "model": "anthropic/claude-haiku-4-5",
      "permission": {
        "edit": "deny",
        "bash": { "git": "allow", "rm": "deny" }  // Per-command permissions
      }
    },
    "Sisyphus": {
      "model": "anthropic/claude-opus-4-6",
      "prompt_append": "Always verify changes with tests before completing."
    }
  }
}
```

### Background Task Concurrency

Configure parallel background agent limits per provider and model.

```jsonc
{
  "background_task": {
    "defaultConcurrency": 5,
    "staleTimeoutMs": 180000,
    "providerConcurrency": {
      "anthropic": 3,
      "openai": 5,
      "google": 10
    },
    "modelConcurrency": {
      "anthropic/claude-opus-4-6": 2,
      "google/gemini-3-flash": 10
    }
  }
}
```

### Tmux Integration for Visual Multi-Agent

Enable tmux integration to see background agents working in separate panes.

```jsonc
{
  "tmux": {
    "enabled": true,
    "layout": "main-vertical",
    "main_pane_size": 60,
    "main_pane_min_width": 120,
    "agent_pane_min_width": 40
  }
}
```

```bash
# Start tmux session and run OpenCode with server mode
tmux new -s dev
opencode --port 4096

# Background agents now spawn in separate tmux panes
```

### Custom Skills Definition

Define custom skills directly in configuration.

```jsonc
{
  "skills": {
    "sources": [
      { "path": "./custom-skills", "recursive": true },
      "https://example.com/skill.yaml"
    ],
    "data-analyst": {
      "description": "Specialized for data analysis tasks",
      "template": "You are a data analyst. Focus on statistical analysis, visualization, and data interpretation.",
      "model": "openai/gpt-5.2",
      "allowed-tools": ["read", "bash", "lsp_diagnostics"]
    }
  }
}
```

---

## Agents

### Invoking Specialized Agents

Use the `@agent` syntax to invoke specialized agents directly in your prompts.

```bash
# Ask Oracle for architecture review (read-only, high reasoning)
Ask @oracle to review this design and propose an architecture

# Ask Librarian for documentation and implementation examples
Ask @librarian how authentication is implemented - find similar patterns in OSS

# Ask Explore for fast codebase search
Ask @explore for all files related to payment processing
```

### Background Agent Execution

Run agents in the background while continuing other work.

```javascript
// Launch explore agent in background
task(
  subagent_type="explore",
  load_skills=[],
  prompt="Find all authentication implementations",
  run_in_background=true
)
// Returns: { task_id: "bg_abc123" }

// Continue working on other tasks...

// Retrieve results when ready
background_output(task_id="bg_abc123")

// Cancel if no longer needed
background_cancel(task_id="bg_abc123")
```

### Task Tool with Categories

Delegate tasks to specialized agents based on domain categories.

```javascript
// Visual/frontend task - uses Gemini
task(category="visual-engineering", prompt="Create a responsive dashboard component with dark mode")

// Complex reasoning task - uses GPT-5.2
task(category="ultrabrain", prompt="Design the payment processing flow with edge case handling")

// Quick trivial task - uses Claude Haiku
task(category="quick", prompt="Fix the typo in the error message")

// Target specific agent directly
task(agent="oracle", prompt="Review this database schema for scalability issues")
```

---

## Built-in Commands

### /ralph-loop - Continuous Execution

Start a self-referential development loop that runs until task completion.

```bash
# Start ralph loop with a goal
/ralph-loop "Build a REST API with authentication"

# With maximum iteration limit
/ralph-loop "Refactor the payment module" --max-iterations=50

# Agent works continuously until:
# - Detects <promise>DONE</promise> completion marker
# - Reaches max iterations (default 100)
# - User runs /cancel-ralph
```

### /ulw-loop - Ultrawork Mode Loop

Same as ralph-loop but with ultrawork mode active for maximum intensity.

```bash
# Full automatic mode with parallel agents
/ulw-loop "Implement the entire user authentication system"
```

### /init-deep - AGENTS.md Generation

Generate hierarchical AGENTS.md knowledge base files throughout your project.

```bash
# Generate AGENTS.md files for entire project
/init-deep

# Create new files only (don't update existing)
/init-deep --create-new

# Limit directory depth
/init-deep --max-depth=3
```

### /refactor - Intelligent Refactoring

Perform intelligent refactoring with LSP, AST-grep, and TDD verification.

```bash
# Refactor a specific target
/refactor getUserById

# Specify scope and strategy
/refactor AuthService --scope=module --strategy=aggressive
```

### /start-work - Execute Prometheus Plan

Execute a work plan created by Prometheus planner.

```bash
# Press Tab to enter Prometheus mode first
# Describe your work and answer interview questions
# Prometheus generates plan in .sisyphus/plans/*.md

# Then execute the plan
/start-work

# Or specify a specific plan
/start-work my-feature-plan
```

---

## LSP Tools

### LSP Diagnostics

Get errors and warnings before building.

```javascript
// Get diagnostics for a file
lsp_diagnostics(file_path="/src/auth/login.ts")
// Returns: [{ severity: "error", message: "Property 'user' does not exist on type 'Session'", line: 42 }]
```

### LSP Rename

Rename symbols across the entire workspace with validation.

```javascript
// Validate rename operation first
lsp_prepare_rename(file_path="/src/utils.ts", line=15, character=10)
// Returns: { canRename: true, placeholder: "getUserById" }

// Perform the rename
lsp_rename(file_path="/src/utils.ts", line=15, character=10, new_name="fetchUserById")
// Updates all references across workspace
```

### LSP Navigation

Navigate to definitions and find all references.

```javascript
// Jump to symbol definition
lsp_goto_definition(file_path="/src/api/routes.ts", line=25, character=15)
// Returns: { file: "/src/services/auth.ts", line: 42, character: 10 }

// Find all usages across workspace
lsp_find_references(file_path="/src/services/auth.ts", line=42, character=10)
// Returns: [{ file: "/src/api/routes.ts", line: 25 }, { file: "/src/tests/auth.test.ts", line: 15 }]
```

### LSP Symbols

Get file outline or search workspace symbols.

```javascript
// Get file outline
lsp_symbols(file_path="/src/services/auth.ts")
// Returns: [{ name: "AuthService", kind: "class", line: 10 }, { name: "login", kind: "method", line: 25 }]

// Search workspace symbols
lsp_symbols(query="UserRepository")
// Returns symbols matching query across all files
```

---

## AST-Grep Tools

### AST-Aware Code Search

Search for code patterns with AST awareness across 25 languages.

```javascript
// Find all async functions
ast_grep_search(pattern="async function $NAME($$$PARAMS) { $$$BODY }", lang="typescript")

// Find React useState hooks
ast_grep_search(pattern="const [$STATE, $SETTER] = useState($INITIAL)", lang="tsx")

// Find console.log statements
ast_grep_search(pattern="console.log($$$ARGS)", lang="javascript", path="/src")
```

### AST-Aware Code Replacement

Replace code patterns while preserving AST structure.

```javascript
// Replace console.log with logger
ast_grep_replace(
  pattern="console.log($$$ARGS)",
  replacement="logger.debug($$$ARGS)",
  lang="typescript",
  path="/src"
)

// Modernize function syntax
ast_grep_replace(
  pattern="function $NAME($$$PARAMS) { return $EXPR }",
  replacement="const $NAME = ($$$PARAMS) => $EXPR",
  lang="javascript"
)
```

---

## Session Tools

### Session Management

List, read, and search across OpenCode sessions.

```javascript
// List all sessions
session_list()
// Returns: [{ id: "session_123", created: "2024-01-15", messages: 45 }]

// Read session history
session_read(session_id="session_123", limit=20)
// Returns: [{ role: "user", content: "..." }, { role: "assistant", content: "..." }]

// Full-text search across sessions
session_search(query="authentication implementation")
// Returns: [{ session_id: "session_123", message_id: 15, snippet: "..." }]

// Get session metadata
session_info(session_id="session_123")
// Returns: { id: "session_123", messages: 45, tokens: 125000, duration: "2h 15m" }
```

---

## Interactive Terminal

### Tmux-Based Interactive Commands

Use tmux for interactive terminal applications like vim, htop, or debuggers.

```javascript
// Create a new tmux session
interactive_bash(tmux_command="new-session -d -s dev-app")

// Send keystrokes to run vim
interactive_bash(tmux_command="send-keys -t dev-app 'vim main.py' Enter")

// Capture current pane output
interactive_bash(tmux_command="capture-pane -p -t dev-app")

// Send Ctrl+C to interrupt
interactive_bash(tmux_command="send-keys -t dev-app C-c")

// Kill session when done
interactive_bash(tmux_command="kill-session -t dev-app")
```

---

## Task System

### Creating and Managing Tasks

Use the Task system for structured task management with dependencies.

```javascript
// Create independent tasks
TaskCreate({ subject: "Build frontend", description: "Create React components" })  // T-001
TaskCreate({ subject: "Build backend", description: "Create API endpoints" })      // T-002

// Create dependent task
TaskCreate({
  subject: "Run integration tests",
  description: "Test frontend-backend integration",
  blockedBy: ["T-001", "T-002"]
})  // T-003

// List active tasks
TaskList()
// T-001 [pending] Build frontend        blockedBy: []
// T-002 [pending] Build backend         blockedBy: []
// T-003 [pending] Integration tests     blockedBy: [T-001, T-002]

// Update task status
TaskUpdate({ id: "T-001", status: "in_progress" })
TaskUpdate({ id: "T-001", status: "completed" })

// Get task details
TaskGet({ id: "T-003" })
// { id: "T-003", subject: "Integration tests", status: "pending", blockedBy: ["T-002"] }
```

---

## Built-in Skills

### Browser Automation with Playwright

Use the playwright skill for browser automation, web scraping, and testing.

```bash
# Invoke playwright skill
/playwright Navigate to https://example.com and take a screenshot

# Or describe browser tasks directly
Use playwright to fill the login form with test@example.com and click submit
```

```javascript
// Via skill_mcp tool
skill_mcp(skill="playwright", operation="navigate", url="https://example.com")
skill_mcp(skill="playwright", operation="screenshot", path="result.png")
skill_mcp(skill="playwright", operation="fill", selector="#email", value="test@example.com")
skill_mcp(skill="playwright", operation="click", selector="button[type=submit]")
```

### Git Master for Atomic Commits

Use git-master skill for intelligent git operations with atomic commits.

```bash
# Commit with automatic splitting (3+ files = 2+ commits)
/git-master commit these changes

# Rebase workflow
/git-master rebase onto main

# History archaeology
/git-master who wrote this authentication code?
/git-master when was the payment feature added?
```

### Frontend UI/UX Skill

Use frontend-ui-ux skill for stunning interface design.

```bash
# Invoke for design tasks
/frontend-ui-ux Create a dashboard with dark mode support

# The skill emphasizes:
# - Bold aesthetic direction (brutalist, maximalist, retro-futuristic)
# - Distinctive typography (no generic Inter/Roboto)
# - Cohesive color palettes with sharp accents
# - High-impact animations and scroll-triggered effects
```

---

## Built-in MCPs

### Web Search with Exa

Search the web for real-time information.

```javascript
// Via MCP tool
mcp_websearch(query="Next.js 14 authentication best practices")
// Returns: [{ title: "...", url: "...", content: "..." }]
```

### Documentation with Context7

Fetch official documentation for any library or framework.

```javascript
// Via MCP tool
mcp_context7(library="react", topic="hooks")
// Returns: Official React documentation on hooks
```

### GitHub Code Search with grep.app

Search across millions of public GitHub repositories.

```javascript
// Via MCP tool
mcp_grep_app(query="useAuth hook implementation", language="typescript")
// Returns: [{ repo: "...", file: "...", code: "..." }]
```

---

## Hooks System

### Claude Code Hooks Integration

Execute custom scripts via Claude Code's settings.json hook system.

```json
// ~/.claude/settings.json or .claude/settings.json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          { "type": "command", "command": "eslint --fix $FILE" }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          { "type": "command", "command": "echo 'Running: $COMMAND'" }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": ".*",
        "hooks": [
          { "type": "command", "command": "echo 'User prompt received'" }
        ]
      }
    ]
  }
}
```

---

## Summary

Oh My OpenCode transforms OpenCode into a comprehensive AI development environment through multi-agent orchestration, specialized domain experts, and intelligent automation. The primary use cases include building features from natural language descriptions, debugging complex issues with Oracle's strategic reasoning, navigating unfamiliar codebases with Explore and Librarian agents, and automating tedious tasks like refactoring, commit management, and documentation updates. The ultrawork mode (`ulw`) provides a "just do it" experience where the system handles exploration, planning, and execution automatically.

Integration patterns center on the configuration system (`oh-my-opencode.jsonc`) which allows fine-grained control over agent models, category mappings, background task concurrency, and feature toggles. The plugin seamlessly integrates with Claude Code configurations (commands, skills, agents, MCPs, hooks) for compatibility, while adding powerful features like tmux-based visual multi-agent execution, persistent task management with dependencies, and OAuth-protected MCP servers. For complex projects, the Prometheus planner + Atlas orchestrator workflow provides structured planning through interviews, detailed work plans with acceptance criteria, and systematic execution with progress tracking across sessions.
